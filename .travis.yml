sudo: false

git:
  depth: 3

language: rust
rust:
  - stable
#  - beta

#matrix:
#  allow_failures:
#    - rust:
#        - beta
#  fast_finish: true

#cache:
# - cargo

addons:
  apt:
    sources:
      - kalakris-cmake
      #- llvm-toolchain-precise-3.9
    packages:
      - cmake
      #- libllvm3.9-dbg
      #- llvm-3.9
      - llvm-dev
      #- llvm-tool
      #- libllvm3.9
      #- llvm-3.9
      #- llvm-3.9-runtime
      #- llvm-3.9-tool
      #- libstdc++-4.9

notifications:
  email: false

install:
  # Install cargo-check to speed up compile time of the general code
  - mkdir -v $HOME/bin
  - sh build/install-llvm.sh
  # - sh build/install-cmake.sh
  - export PATH=$PATH:$HOME/.cargo/bin
  - echo $PATH
  - ls $HOME/bin
  - echo "Done with install"

script:
  - echo "Beginning script"
  - echo $PATH
  - ls $HOME/bin
  - whereis -b llvm-config
  - whereis -b cmake
  - llvm-config --version
  - cmake --version
#  - cargo check --verbose
  - cargo test --verbose compile_example
